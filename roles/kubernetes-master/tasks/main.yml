#first command (install) (need to explicitly assign ip address)
kubeadm init --pod-network-cidr=10.244.0.0/16 --apiserver-advertise-address 192.168.56.101 --apiserver-bind-port 6443

#second phase (set configs)
sudo cp /etc/kubernetes/admin.conf $HOME/
sudo chown $(id -u):$(id -g) $HOME/admin.con
export KUBECONFIG=$HOME/admin.conf

#third phase (networking)
kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/2140ac876ef134e0ed5af15c65e414cf26827915/Documentation/kube-flannel.yml

##### sanity checks (ensure all pods start)
#make sure all pods start
kubectl get pods --all-namespaces
#make sure kubernetes api is reachable
kubectl version
#check which ip the cluster got set to:
kubectl cluster-info

#fourth phase (untaint the master to allow pods creation)
kubectl taint nodes --all node-role.kubernetes.io/master-

#fifth phase:
#setup user for kubernetes gui pod
kubectl apply -f kubernetes-adminuser.yaml
#install the kubernete gui pod
kubectl apply -f dashboard.yaml
##expose dashboard with node port

####notes
this can pull images beforehand:
kubeadm config images pull


#look into the systemd docker driver message that comes from the kube init message
